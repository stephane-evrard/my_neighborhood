{%extends 'layout.html' %}


{% block content %}
{% if user.is_authenticated %}
{{block.super}}
<div class="container-fluid" style="height: 100%;">
  <div class="row align-items-center">
    <div class="col-lg-9 pr-1 pl-1">
        <div class="container pt-2 mt-2">
            <p class="font-weight-bold">Choose your Neighborhood:</p>
            
          <form class="" action="{% url 'index' %}" method="get">

            <!-- Grid row -->
          <div class="row">
              <!-- Grid column -->
              <div class="col">
                <!-- Default input -->
                <select name="neighborhood" class="form-control  form-control-lg">
                    {% for neighborhood in all_neighborhoods %}
                    <option value="{{neighborhood.name}}">{{neighborhood.name}}</option>
                    {% endfor %}
                  </select>     
              </div>
              <!-- Grid column -->
          
              <!-- Grid column -->
              <div class="col">
                <!-- Default input -->
                <button type = "submit" class="btn btn-outline-dark btn-md">FIND BUSINESSES</button>
              </div>
              <!-- Grid column -->
            </div>
            <!-- Grid row -->
          </form>

        </div>

        <div class="container pt-4 mt-2 mb-4 pb-4">

          {% if location %}
              <!-- start of table  --> 
            <div class="table-responsive">
              <table id="dtBasicExample" class="table table-striped table-bordered" cellspacing="0" width="100%">
                  <thead class="black white-text">
                    <tr class="font-weight-bold">
                      <th class="th-sm">Business Name
                      </th>
                      <th class="th-sm">Business Address
                      </th>
                      <th class="th-sm">Business Email
                      </th>
                      <th class="th-sm">Neighborhood
                      </th>
                      
                    </tr>
                  </thead>
                  <tbody>
                      {% for biz in location%}
                    <tr>
                      <td>{{biz.name}}</td>
                      <td>{{biz.address}}</td>
                      <td>{{biz.email}}</td>
                      <td>{{biz.neighborhood.name}}</td>
                      
                    </tr>
              {% endfor %}

                    
                  </tbody>
                  <!-- <tfoot>
                    <tr>
                    <th class="th-sm">Name
                      </th>
                      <th class="th-sm">Address
                      </th>
                      <th class="th-sm">Email
                      </th>
                      <th class="th-sm">Neighborhood
                      </th>
                    </tr>
                  </tfoot> -->
                </table>
            </div>
              <!-- end of table  -->

              {% else %}
              <p>Nothing found. Choose a Location and Hit the Search Button.</p>
            
          {% endif %}

        </div>
      </div>
      
      <!-- second column -->

      <div class="col-lg-3 pt-2 mt-2 mb-4 pb-2">
        {% if location %}
        <div class="container ">
            <h4>{{message}} Updates</h4>
            <hr>
            
            <div class="pl-1 ml-1 pt-2">
              {% for post in all_posts %}
              <p>{{post.post}}</p>
              <small>Posted by: {{post.Author}}</small> <br>
              <small>Posted by: {{post.pub_date}}</small>

              <hr>

              {% endfor %}
            {% endif %}
            </div>
        </div>
      </div>

    </div>
</div>
{% else %}

<div style="background:url('/media/images/homebg.jpg'); height: 100%; background-size: cover; background-position: center;"> 

  <div id="intro">
      
      <div class="mask rgba-black-light" style="height: 100vh;">

          <div class="container-fluid d-flex align-items-center justify-content-center h-50">

              <div class="row d-flex justify-content-center text-center">

                  <div class="col-lg-12 pt-5 mt-5">

                      <!-- Heading -->
                      <h3 class="display-4 font-weight-bold white-text pt-5">Welcome to My Neighborhood</h3>

                      <!-- Divider -->
                      <hr class="hr-light">
                      <!-- <p class="font-weight-bold white-text">The awards of design, creativity and innovation on the internet</p> -->
                      <a href="/accounts/login"><button type="button" class="btn btn-outline-white">Login<i class="fa fa-book ml-2"></i></button>
                      </a>
                      <a href="accounts/register"><button type="button" class="btn btn-outline-white">Sign Up<i class="fa fa-book ml-2"></i></button>
                      </a>
                  </div>

              </div>

          </div>

      </div>

  </div>


</div>
{% endif %}
<!-- end of landing layout -->

{% endblock %}
